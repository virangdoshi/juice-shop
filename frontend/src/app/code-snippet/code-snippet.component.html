<!--
  ~ Copyright (c) 2014-2021 Bjoern Kimminich.
  ~ SPDX-License-Identifier: MIT
  -->

<mat-dialog-content class="mat-typography">
  <header>
    <h1>{{"LABEL_CODE_SNIPPET" | translate}}</h1>
  </header>
  <mat-divider></mat-divider>
  <div class="container" fxLayout="column">
    <div fxLayout="row" fxLayoutGap="10px">
      <div>
        <pre><code [highlight]="snippet?.snippet || ('LOADING_CODE_SNIPPET' | translate)" [lineNumbers]="true"></code></pre>
      </div>
    </div>
    <div *ngIf="snippet?.vulnLines.length > 0" fxLayout="row" fxLayoutGap="10px">
      <div>
        <span class="spoiler">
          <mat-chip>
            {{ "REVEAL_VULNERABLE_CODE_LINES" | translate }}
            <mat-icon color="warn" class="spoiler-off">
              visibility_off
            </mat-icon>
            <mat-icon color="accent" class="spoiler-on">
              visibility
            </mat-icon>
          </mat-chip>
          <span>
            <mat-chip class="spoiler-on"><span translate="LABEL_LINES"></span>&nbsp;<code>{{snippet?.vulnLines}}</code></mat-chip>
          </span>
        </span>
      </div>
    </div>
  </div>
  <mat-dialog-actions align="end" class="dialogAction">
    <button mat-button style="height: 0; position: absolute;">
      <!-- 'absorbs' the auto-focus behavior -->
    </button>
    <button mat-stroked-button mat-dialog-close class="close-dialog buttons" aria-label="Close Dialog">
      <i class="material-icons">
        close
      </i>
      <span>  {{'BTN_CLOSE' | translate}}</span>
    </button>
  </mat-dialog-actions>
</mat-dialog-content>
